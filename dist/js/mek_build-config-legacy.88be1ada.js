(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mek_build-config"],{"224f":function(n,e,t){"use strict";t.r(e);var i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"mek-inline-flex-row"},[t("mek-side-menu",{attrs:{title:"Configs",format:"full",list:!0,sections:n.configuration_list,collapsible:!0,clickable:!0,"selected-item":n.working_uuid},on:{"side-menu-clicked":n.load_config}}),t("div",{staticClass:"mek-inline-flex-col"},[t("mek-component-name",{attrs:{"new-component":n.newComponent,"component-name":n.computedComponentName,"component-changed":n.component_changed},on:{"update-component-name":n.updateComponentName}}),t("mek-sub-component-table",{key:"msc-"+n.configurationForms.length,attrs:{name:"Configuration",flow:"dropdown-pkey",pkey:"config",items:n.configurationForms,"show-headers":!0,headers:n.headers,"selected-keys":n.selectedConfigPkey},on:{"update-selected-data":n.select_config}}),t("mek-save-reset-component",{attrs:{activeButtons:n.activeButtons},on:{"save-reset-component":n.saveResetComponent}})],1)],1)},o=[],s=(t("8e6e"),t("6762"),t("2fdb"),t("ac6a"),t("456d"),t("bd86")),r=(t("7f7f"),t("8fcf"));function a(n,e){var t=Object.keys(n);return Object.getOwnPropertySymbols&&t.push.apply(t,Object.getOwnPropertySymbols(n)),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(t,!0).forEach(function(e){Object(s["a"])(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(t).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var u={name:"mek-build-config",components:{"mek-sub-component-table":function(){return t.e("mek_sub-component-table").then(t.bind(null,"a949"))},"mek-save-reset-component":function(){return t.e("mek-save-reset-component").then(t.bind(null,"972e"))},"mek-component-name":function(){return t.e("mek-component-name").then(t.bind(null,"4a3f"))},"mek-side-menu":function(){return t.e("mek_side-menu").then(t.bind(null,"95aa"))}},props:["selectedData"],mixins:[r["a"]],data:function(){var n={configurationFormsList:[{config:"Humanoid",cost:.375,hardpoints:["all"],propulsion:["all"],flight_without_propulsion:!1,no_hands:!1,modifiers:{}},{config:"Tank",cost:.3,propulsion:["wheels","treads","ges","gravitics"],hardpoints:["torso","head","pod","binder"],no_hands:!0,flight_without_propulsion:!1,modifiers:{maneuver_value:-1,armor_stopping_power:2}},{config:"Avian",cost:.35,propulsion:["legs","ges","thrusters","gravitics"],hardpoints:["all"],no_hands:!0,flight_without_propulsion:!0,modifiers:{maneuver_value:-1,melee_damage:2,flight_movement_allowance:6,land_movement_alloance:0}},{config:"Fighter/Corvette",cost:.3,propulsion:["ges","thrusters","gravitics"],hardpoints:["torso","pod","head","wings","binder"],no_hands:!0,flight_without_propulsion:!1,modifiers:{maneuver_value:-2,flight_movement_allowance:"x2",minimum_flight_movement_alloance:4,land_movement_alloance:0}}],headers:{config:"Form",cost:"Cost"},selected_configuration:null,working_configurations:{},component_name:null,working_uuid:null,component_changed:!0,newComponent:!0};return n},methods:{updateComponentName:function(n){this.component_name=n,this.component_changed=!0},select_config:function(n){var e=this.selected_configuration?this.selected_configuration.name:null,t=!!this.selected_configuration&&this.selected_configuration.base_config;this.$set(this,"selected_configuration",JSON.parse(JSON.stringify(n))),this.selected_configuration.name=e,t&&(this.selected_configuration.base_config=!0),this.component_changed=!0},saveResetComponent:function(n){var e=this.working_uuid?this.working_uuid:this.create_short_uuid(),t=c({uuid:e},this.selected_configuration);switch(0==Object.keys(this.working_configurations).length&&(t.base_config=!0),t.name=this.component_name,n){case"save":this.working_configurations[e]=t,this.working_uuid=e,this.$emit("saveSelectedData","config",this.working_configurations),this.newComponent=!1,this.component_changed=!1;break;case"reset":if(this.working_uuid){this.$set(this,"selected_configuration",t);break}case"delete":this.working_uuid&&(delete this.working_configurations[e],this.$emit("saveSelectedData","config",this.working_configurations));case"new":this.working_uuid=null,this.$set(this,"selected_configuration",JSON.parse(JSON.stringify(this.configurationForms[0]))),this.newComponent=!0,this.component_changed=!0;break}},load_config:function(n){switch(!0){case""==n&&null===this.working_uuid:this.$set(this,"selected_configuration",null);break;case""==n:this.$set(this,"selected_configuration",this.selectedData[this.working_uuid]);break;default:this.$set(this,"selected_configuration",this.selectedData[n]),this.working_uuid=n,this.newComponent=!1,this.component_changed=!1}},configCompare:function(n,e){var t=n.config,i=e.config;switch(!0){case t==i:return 0;case"Humanoid"==t:return 1;case"Humanoid"==i:return-1}var o=n.hardpoints,s=e.hardpoints;switch(!0){case"all"==o[0]&&"all"==s[0]:return 0;case"all"==o[0]:case o.length>s.length:return 1;case"all"==s[0]:case o.length<s.length:return-1}return this.hardpointCompare(o,s)},hardpointCompare:function(n,e){var t=n.filter(function(n){return!e.includes(n)});return t.length>0?1:0},adjustBaseConfig:function(n){var e=null;for(var t in this.working_configurations)if(-1==this.configCompare(n,this.working_configurations[t])){e=this.working_configurations[t].uuid;break}null!==e&&(delete n.base_config,this.working_configurations[e].base_config=!0)}},computed:{selectedConfigPkey:function(){var n=void 0===this.selectedData?["Humanoid"]:null!==this.selected_configuration?[this.selected_configuration.config]:this.configurationForms.length>0?[this.configurationForms[0].config]:["Humanoid"];return n},configuration_list:function(){var n=this;if(void 0===this.selectedData||0==Object.keys(this.selectedData).length)return{};var e=Object.keys(this.working_configurations).reduce(function(e,t){return e[t]=n.working_configurations[t].name?n.working_configurations[t].name:n.working_configurations[t].config,e[t]+=n.working_configurations[t].base_config?" (Base)":"",e},{});return null===this.working_uuid&&0==Object.keys(this.working_configurations).length&&(this.working_uuid=Object.keys(this.working_configurations)[0],this.$set(this,"selected_configuration",this.working_configurations[this.working_uuid]),this.component_changed=!1,this.newComponent=!1),e},configurationForms:function(){var n=this,e=void 0===this.selectedData||0==Object.keys(this.selectedData).length?"Humanoid":this.selectedData[this.base_config_key].config,t=void 0===this.selectedData||0==Object.keys(this.selectedData).length?["all"]:this.working_configurations[this.base_config_key].hardpoints,i=!(!this.selected_configuration||!this.selected_configuration.base_config);if("Humanoid"==e||i)return this.configurationFormsList;if("all"==t[0])return this.configurationFormsList.slice(1);var o=this.configurationFormsList.reduce(function(e,i){return[-1,0].includes(n.hardpointCompare(t,i.hardpoints))&&e.push(i),e},[]);return o},base_config_key:function(){if(void 0===this.selectedData||0==Object.keys(this.selectedData).length)return null;var n=Object.keys(this.working_configurations)[0],e=null;for(var t in this.working_configurations)this.working_configurations[t].base_config&&(e=t);return null===e?n:e},activeButtons:function(){return"save,reset,new"+(null!==this.working_uuid?",delete":"")},computedComponentName:function(){var n=null!==this.component_name?this.component_name:null!==this.selected_configuration?this.selected_configuration.config:this.configurationForms.length>0?this.configurationForms[0].config:"dunno";return n}},watch:{selectedData:{immediate:!0,handler:function(n){var e=JSON.parse(JSON.stringify(this.selectedData||{}));if(this.$set(this,"working_configurations",e),void 0===n||0==Object.keys(n).length)this.$set(this,"selected_configuration",JSON.parse(JSON.stringify(this.configurationFormsList[0]))),this.working_uuid=null,this.component_changed=!0,this.newComponent=!0,this.$set(this.selected_configuration,"base_config",!0);else if(Object.keys(n).length>1){var t=Object.keys(this.working_configurations)[0];for(var i in this.working_configurations)if(this.working_configurations[i].base_config){t=this.working_configurations[i].uuid;break}this.adjustBaseConfig(this.working_configurations[t])}}}}},l=u,g=t("2877"),f=Object(g["a"])(l,i,o,!1,null,"b2d465aa",null);e["default"]=f.exports},"2fdb":function(n,e,t){"use strict";var i=t("5ca1"),o=t("d2c8"),s="includes";i(i.P+i.F*t("5147")(s),"String",{includes:function(n){return!!~o(this,n,s).indexOf(n,arguments.length>1?arguments[1]:void 0)}})},5147:function(n,e,t){var i=t("2b4c")("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[i]=!1,!"/./"[n](e)}catch(o){}}return!0}},6762:function(n,e,t){"use strict";var i=t("5ca1"),o=t("c366")(!0);i(i.P,"Array",{includes:function(n){return o(this,n,arguments.length>1?arguments[1]:void 0)}}),t("9c6c")("includes")},"8fcf":function(n,e,t){"use strict";t("ac6a"),t("34ef"),t("6b54"),t("a481");e["a"]={methods:{round:function(n,e){if("undefined"===typeof e||0==+e)return Math.round(+n);var t=Math.pow(10,+e);return Math.round(+n*t)/t},floor:function(n){return Math.floor(+n)},ceiling:function(n){return Math.ceiling(+n)},decimalPad:function(n){return+n%1===0?n.toPrecision(2):n},create_uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})},create_short_uuid:function(){return([1e7]+-1e3).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})},invisible_pad:function(n){var e="";return n.forEach(function(n){n.length>e.length&&(e=n)},0),e+"XX"},isNumeric:function(n){return"undefined"!==typeof n&&!isNaN(parseFloat(n))&&isFinite(n)}}}},aae3:function(n,e,t){var i=t("d3f4"),o=t("2d95"),s=t("2b4c")("match");n.exports=function(n){var e;return i(n)&&(void 0!==(e=n[s])?!!e:"RegExp"==o(n))}},d2c8:function(n,e,t){var i=t("aae3"),o=t("be13");n.exports=function(n,e,t){if(i(e))throw TypeError("String#"+t+" doesn't accept regex!");return String(o(n))}}}]);
//# sourceMappingURL=mek_build-config-legacy.88be1ada.js.map