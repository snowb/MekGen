{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_object-to-array.js","webpack:///./node_modules/core-js/modules/es7.object.entries.js","webpack:///./src/store/modules/validators/mek_emw_validator.js"],"names":["DESCRIPTORS","__webpack_require__","getKeys","toIObject","isEnum","f","module","exports","isEntries","it","key","O","keys","length","i","result","call","push","$export","$entries","S","entries","loopValidators","updateMultipliers","round","validators","e","then","bind","_module","accuracy","cleaned_feature","attack_factor","damage","update_damage","create_damage_data_table","filter_feature","filter_data_table","feature","turns_in_use","space_efficiency","validate_efficiency","derived","_component","_isVarBeamShield","_isBeamShield","validatedData","cleanedComponent","alerts","updateList","cost_multipliers","data","concat","cost_multiplier","Object","reduce","_multi","_val","newDamageCapacity","selected_damage","cost","damage_capacity","newWeight","weight","newCost","efficiencies","space","newBeamShield","stopping_power","defense_accuracy","selected_accuracy","undefined","beam_shield","validateComponent","loopAlerts","selected_turns_in_use","turns","feature_array","cleaned_array","isVariableBeamShield","isBeamShield","some","_feat","test","componentsToValidate","validator","pkey","component_prop","_loopValidators","total_cost"],"mappings":"wGAAA,IAAAA,EAAkBC,EAAQ,QAC1BC,EAAcD,EAAQ,QACtBE,EAAgBF,EAAQ,QACxBG,EAAaH,EAAQ,QAAeI,EACpCC,EAAAC,QAAA,SAAAC,GACA,gBAAAC,GACA,IAKAC,EALAC,EAAAR,EAAAM,GACAG,EAAAV,EAAAS,GACAE,EAAAD,EAAAC,OACAC,EAAA,EACAC,EAAA,GAEA,MAAAF,EAAAC,EACAJ,EAAAE,EAAAE,KACAd,IAAAI,EAAAY,KAAAL,EAAAD,IACAK,EAAAE,KAAAT,EAAA,CAAAE,EAAAC,EAAAD,IAAAC,EAAAD,IAGA,OAAAK,0BCjBA,IAAAG,EAAcjB,EAAQ,QACtBkB,EAAelB,EAAQ,OAARA,EAA4B,GAE3CiB,IAAAE,EAAA,UACAC,QAAA,SAAAZ,GACA,OAAAU,EAAAV,wHCkCIa,EAAgBC,EAAmBC,EAxCnCC,EAAW,GAEfxB,EAAAyB,EAAA,gCAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEHJ,EAAWK,SAASD,EAAQE,kBAGhC9B,EAAAyB,EAAA,qCAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEHJ,EAAWO,cAAcH,EAAQE,kBAGrC9B,EAAAyB,EAAA,8BAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEHJ,EAAWQ,OAAOJ,EAAQE,gBAC1BN,EAAWS,cAAcL,EAAQM,2BAGrClC,EAAAyB,EAAA,+BAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEHJ,EAAWW,eAAeP,EAAQQ,kBAClCZ,EAAWa,QAAQT,EAAQE,kBAG/B9B,EAAAyB,EAAA,oCAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEHJ,EAAWc,aAAaV,EAAQE,kBAGpC9B,EAAAyB,EAAA,oCAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEHJ,EAAWe,iBAAiBX,EAAQY,sBAIxCxC,EAAAyB,EAAA,uBAAAC,KAAA1B,EAAA2B,KAAA,cACCD,KAAK,SAACE,GAEDP,EAA4CO,EAA5CP,eAAgBC,EAA4BM,EAA5BN,kBAAmBC,EAASK,EAATL,QAGzCC,EAAWiB,QAAQ,SAACC,EAAYC,EAAkBC,GAE9C,IAEIC,EAFAC,EAAiBJ,EACjBK,EAAO,GAEPC,EAAW,CAAC,wBAAwB,oBAAoB,yBAAyB,iBAErFH,EAAcvB,EAAkB0B,EAAWF,EAAiB,WAC5DA,EAAiBG,iBAAiBJ,EAAcK,KAChDH,EAAOA,EAAOI,OAAON,EAAcE,QAEnC,IAAIK,EAAgBC,OAAOjC,QAAQ0B,EAAiBG,kBAAkBK,OAAO,SAACC,EAAQC,GAElF,OAAOD,EAAOC,EAAK,IACrB,GACFJ,EAAgB7B,EAAM6B,EAAgB,GACnCN,EAAiBM,iBAAiBA,IAEjCL,EAAO/B,KAAK,4BACZ+B,EAAO/B,KAAK,kDACZ8B,EAAiBM,gBAAgB7B,EAAM6B,EAAgB,IAE3D,IAAIK,EAAkBlC,EAAMuB,EAAiBY,gBAAgBC,KAAK,EAAE,GACjEb,EAAiBc,iBAAiBH,IAEjCV,EAAO/B,KAAK,4BACZ+B,EAAO/B,KAAK,kDACZ8B,EAAiBc,gBAAgBH,GAErC,IAAII,EAAUtC,EAAMkC,EAAkB,EAAE,GACrCX,EAAiBgB,QAAQD,IAExBd,EAAO/B,KAAK,mBACZ+B,EAAO/B,KAAK,yCACZ8B,EAAiBgB,OAAOD,GAE5B,IAAIE,EAASjB,EAAiBY,gBAAgBC,KAAOP,EAAmBN,EAAiBkB,aAAaC,MAAMN,KAC5GI,EAAQxC,EAAMwC,EAAQ,GACnBjB,EAAiBa,MAAMI,IAEtBhB,EAAO/B,KAAK,iBACZ+B,EAAO/B,KAAK,uCACZ8B,EAAiBa,KAAKI,GAE1B,IAAIG,EAAc,CACVC,eAAerB,EAAiBY,gBAAgBC,KAChDS,iBAAiBtB,EAAiBuB,kBAAkBxC,SAAS,EAC7DG,OAAQc,EAAiBY,gBAAgB1B,QA2BjD,YAzBkCsC,IAA/BxB,EAAiByB,aAA2B3B,IAE3CG,EAAO/B,KAAK,wBACZ+B,EAAO/B,KAAK,mDACZ8B,EAAiByB,YAAYL,GAE9BpB,EAAiByB,YAAYJ,gBAAgBD,EAAcC,iBAE1DpB,EAAO/B,KAAK,uCACZ+B,EAAO/B,KAAK,6DACZ8B,EAAiByB,YAAYJ,eAAeD,EAAcC,gBAE3DrB,EAAiByB,YAAYH,kBAAkBF,EAAcE,mBAE5DrB,EAAO/B,KAAK,yCACZ+B,EAAO/B,KAAK,+DACZ8B,EAAiByB,YAAYH,iBAAiBF,EAAcE,kBAE7DtB,EAAiByB,YAAYvC,QAAQkC,EAAclC,SAElDe,EAAO/B,KAAK,+BACZ+B,EAAO/B,KAAK,qDACZ8B,EAAiByB,YAAYvC,OAAOkC,EAAclC,QAG/C,CAACkB,KAAKJ,EAAkBC,OAAOA,IAG1C,IAAIyB,EAAkB,SAAC9B,GAEnB,IACIG,EACA4B,EAFA3B,EAAiBJ,EAGjBK,EAAO,GAEXF,EAAcrB,EAAWc,aAAa,QAAQQ,EAAiB4B,uBAC/D5B,EAAiB4B,sBAAsB7B,EAAcK,KACrDH,EAAOA,EAAOI,OAAON,EAAcE,QAEnCvB,EAAWW,eAA6D,gBAA9CW,EAAiB4B,sBAAsBC,OAEjE9B,EAAcrB,EAAWa,QAAQS,EAAiB8B,cAAc,WAChE9B,EAAiB8B,cAAc/B,EAAcgC,cAC7C9B,EAAOA,EAAOI,OAAON,EAAcE,QAEnC,IAAI+B,GAAqB,EACrBC,EAAajC,EAAiB8B,cAAcI,KAAK,SAACC,GAMlD,MAJG,+BAA+BC,KAAKD,EAAM5C,WAEzCyC,GAAqB,GAElB,qBAAqBI,KAAKD,EAAM5C,WAG3Cb,EAAWS,cAAc8C,IAAiBD,GAE1C,IAAIK,EACJ,CACI,CAACC,UAAU5D,EAAWQ,OAAOqD,KAAK,OAAOC,eAAe,mBACxD,CAACF,UAAU5D,EAAWK,SAASwD,KAAK,WAAWC,eAAe,qBAC9D,CAACF,UAAU5D,EAAWO,cAAcsD,KAAK,gBAAgBC,eAAe,2BAhChFC,EAkCsClE,EAAe8D,EAAsBrC,GAArEA,EAlCNyC,EAkCMzC,iBAAkB2B,EAlCxBc,EAkCwBd,WACpB1B,EAAOA,EAAOI,OAAOsB,GAGrB5B,EAAcrB,EAAWiB,QAAQK,EAAkBgC,EAAsBC,GACzEjC,EAAiBD,EAAcK,KAC/BH,EAAOA,EAAOI,OAAON,EAAcE,QAEnC,IAAIyC,EAAW1C,EAAiBY,gBAAgBC,KAAOb,EAAiBM,gBAMxE,OAJAP,EAAcrB,EAAWe,iBAAiBO,EAAiBkB,aAAaC,MAAOuB,EAAY,WAC3FzC,EAAOA,EAAOI,OAAON,EAAcE,QACnCD,EAAiBkB,aAAaC,MAAMpB,EAAcK,KAE3C,CAACA,KAAKJ,EAAiBC,OAAOA","file":"js/mek_emw_validator-legacy.554727ba.js","sourcesContent":["var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","let validators={};\r\n\r\nimport(/* webpackChunkName: \"mek_emw-accuracy-data-module\" */\"@/data_table_modules/mek_emw/mek_emw-accuracy-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.accuracy=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_emw-attack-factor-data-module\" */\"@/data_table_modules/mek_emw/mek_emw-attack-factor-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.attack_factor=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_emw-damage-data-module\" */\"@/data_table_modules/mek_emw/mek_emw-damage-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.damage=_module.cleaned_feature;\r\n    validators.update_damage=_module.create_damage_data_table;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_emw-feature-data-module\" */\"@/data_table_modules/mek_emw/mek_emw-feature-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.filter_feature=_module.filter_data_table;//filter based on burst_value\r\n    validators.feature=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_emw-turns-in-use-data-module\" */\"@/data_table_modules/mek_emw/mek_emw-turns-in-use-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.turns_in_use=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_space-efficiency-data-module\" */\"@/data_table_modules/universal/mek_space-efficiency-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.space_efficiency=_module.validate_efficiency;\r\n});\r\n\r\nlet loopValidators, updateMultipliers, round;\r\nimport(/* webpackChunkName: \"validator_functions\" */\"./validator_functions\")\r\n.then((_module)=>\r\n{\r\n    ({loopValidators, updateMultipliers, round} = _module);\r\n});\r\n\r\nvalidators.derived=(_component, _isVarBeamShield, _isBeamShield)=>\r\n{\r\n    let cleanedComponent=_component;\r\n    let alerts=[];\r\n    let validatedData;\r\n    let updateList=[\"selected_turns_in_use\",\"selected_accuracy\",\"selected_attack_factor\",\"feature_array\"];\r\n    //update cost_multipliers for components needing update\r\n    validatedData=updateMultipliers(updateList,cleanedComponent,\"Mek-EMW\");\r\n    cleanedComponent.cost_multipliers=validatedData.data;\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    //update cost_multiplier\r\n    let cost_multiplier=Object.entries(cleanedComponent.cost_multipliers).reduce((_multi, _val)=>\r\n    {//calc new cost_multiplier\r\n        return _multi*_val[1];\r\n    },1);\r\n    cost_multiplier=round(cost_multiplier,2);\r\n    if(cleanedComponent.cost_multiplier!=cost_multiplier)\r\n    {\r\n        alerts.push(\"Mek-EMW: cost_multiplier\");\r\n        alerts.push(\"**** Invalid Cost Multiplier. Correcting. ****\");\r\n        cleanedComponent.cost_multiplier=round(cost_multiplier,2);\r\n    }\r\n    let newDamageCapacity=round(cleanedComponent.selected_damage.cost/4,2);\r\n    if(cleanedComponent.damage_capacity!=newDamageCapacity)\r\n    {\r\n        alerts.push(\"Mek-EMW: damage_capacity\");\r\n        alerts.push(\"**** Invalid Damage Capacity. Correcting. ****\");\r\n        cleanedComponent.damage_capacity=newDamageCapacity;\r\n    }\r\n    let newWeight=round(newDamageCapacity/2,2);\r\n    if(cleanedComponent.weight!=newWeight)\r\n    {\r\n        alerts.push(\"Mek-EMW: weight\");\r\n        alerts.push(\"**** Invalid Weight. Correcting. ****\");\r\n        cleanedComponent.weight=newWeight;\r\n    }\r\n    let newCost=(cleanedComponent.selected_damage.cost * cost_multiplier) + cleanedComponent.efficiencies.space.cost;\r\n    newCost=round(newCost,2);\r\n    if(cleanedComponent.cost!=newCost)\r\n    {\r\n        alerts.push(\"Mek-EMW: cost\");\r\n        alerts.push(\"**** Invalid cost. Correcting. ****\");\r\n        cleanedComponent.cost=newCost;\r\n    }\r\n    let newBeamShield={\r\n            stopping_power:cleanedComponent.selected_damage.cost, \r\n            defense_accuracy:cleanedComponent.selected_accuracy.accuracy-2,\r\n            damage: cleanedComponent.selected_damage.damage\r\n        };\r\n    if(cleanedComponent.beam_shield===undefined && _isBeamShield)\r\n    {\r\n        alerts.push(\"Mek-EMW: beam_shield\");\r\n        alerts.push(\"**** Beam Shield data missing. Correcting. ****\");\r\n        cleanedComponent.beam_shield=newBeamShield;\r\n    }\r\n    if(cleanedComponent.beam_shield.stopping_power!=newBeamShield.stopping_power)\r\n    {\r\n        alerts.push(\"Mek-EMW: beam_shield.stopping_power\");\r\n        alerts.push(\"**** Invalid Beam Shield Stopping Power: Correcting. ****\");\r\n        cleanedComponent.beam_shield.stopping_power=newBeamShield.stopping_power;\r\n    }\r\n    if(cleanedComponent.beam_shield.defense_accuracy!=newBeamShield.defense_accuracy)\r\n    {\r\n        alerts.push(\"Mek-EMW: beam_shield.defense_accuracy\");\r\n        alerts.push(\"**** Invalid Beam Shield Defense Accuracy: Correcting. ****\");\r\n        cleanedComponent.beam_shield.defense_accuracy=newBeamShield.defense_accuracy;\r\n    }\r\n    if(cleanedComponent.beam_shield.damage!=newBeamShield.damage)\r\n    {\r\n        alerts.push(\"Mek-EMW: beam_shield.damage\");\r\n        alerts.push(\"**** Invalid Beam Shield Damage: Correcting. ****\");\r\n        cleanedComponent.beam_shield.damage=newBeamShield.damage;\r\n    }\r\n\r\n    return {data:cleanedComponent, alerts:alerts};\r\n};\r\n\r\nlet validateComponent=(_component)=>\r\n{\r\n    let cleanedComponent=_component;\r\n    let validatedData;\r\n    let loopAlerts;\r\n    let alerts=[];\r\n    //validate turns in use as feature array is dependent\r\n    validatedData=validators.turns_in_use(\"turns\",cleanedComponent.selected_turns_in_use);\r\n    cleanedComponent.selected_turns_in_use=validatedData.data;\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    //update feature table\r\n    validators.filter_feature(cleanedComponent.selected_turns_in_use.turns==\"__INFINITY__\");\r\n    //validate feature_array, as selected_damage is dependent\r\n    validatedData=validators.feature(cleanedComponent.feature_array,\"feature\");\r\n    cleanedComponent.feature_array=validatedData.cleaned_array;\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    //update isBeamShield and isVariableBeamShield\r\n    let isVariableBeamShield=false;\r\n    let isBeamShield=cleanedComponent.feature_array.some((_feat)=>\r\n    {\r\n        if(/.*variable.*beam.*shield.*/gi.test(_feat.feature))\r\n        {\r\n            isVariableBeamShield=true;\r\n        }\r\n        return /.*beam.*shield.*/gi.test(_feat.feature);\r\n    });\r\n    //update damage validator\r\n    validators.update_damage(isBeamShield && !isVariableBeamShield);\r\n    //loop thru other validations\r\n    let componentsToValidate=\r\n    [\r\n        {validator:validators.damage,pkey:\"cost\",component_prop:\"selected_damage\"},\r\n        {validator:validators.accuracy,pkey:\"accuracy\",component_prop:'selected_accuracy'},\r\n        {validator:validators.attack_factor,pkey:\"attack_factor\",component_prop:'selected_attack_factor'},\r\n    ];\r\n    ({cleanedComponent, loopAlerts} = loopValidators(componentsToValidate, cleanedComponent));\r\n    alerts=alerts.concat(loopAlerts)\r\n    \r\n    //call validators.derived() here\r\n    validatedData=validators.derived(cleanedComponent, isVariableBeamShield, isBeamShield);\r\n    cleanedComponent=validatedData.data;\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    \r\n    let total_cost=cleanedComponent.selected_damage.cost * cleanedComponent.cost_multiplier;\r\n    //update space efficiency\r\n    validatedData=validators.space_efficiency(cleanedComponent.efficiencies.space, total_cost, \"Mek-EMW\");\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    cleanedComponent.efficiencies.space=validatedData.data;\r\n\r\n    return {data:cleanedComponent,alerts:alerts};\r\n};\r\n\r\nexport {validateComponent};"],"sourceRoot":""}