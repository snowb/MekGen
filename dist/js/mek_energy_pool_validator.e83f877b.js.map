{"version":3,"sources":["webpack:///./src/store/modules/validators/mek_energy_pool_validator.js"],"names":["loopValidators","updateMultipliers","round","validators","__webpack_require__","e","then","bind","_module","size","cleaned_feature","pool","feature","space_efficiency","validate_efficiency","validateComponent","_component","validatedData","loopAlerts","cleanedComponent","updateList","alerts","componentsToValidate","validator","pkey","component_prop","_loopValidators","concat","cost_multipliers","data","cost_multiplier","Object","entries","reduce","_multi","_val","total_cost","selected_energy_pool","cost","efficiencies","space","isFragile","feature_array","some","_feat","damage_capacity","weight"],"mappings":"8LAAA,IA6BIA,EAAgBC,EAAmBC,EA7BnCC,EAAW,GAEfC,EAAAC,EAAA,oCAAAC,KAAAF,EAAAG,KAAA,cAECD,KAAME,IAEHL,EAAWM,KAAKD,EAAQE,kBAG5BN,EAAAC,EAAA,oCAAAC,KAAAF,EAAAG,KAAA,cAECD,KAAME,IAEHL,EAAWQ,KAAKH,EAAQE,kBAG5BN,EAAAC,EAAA,uCAAAC,KAAAF,EAAAG,KAAA,cAECD,KAAME,IAEHL,EAAWS,QAAQJ,EAAQE,kBAG/BN,EAAAC,EAAA,oCAAAC,KAAAF,EAAAG,KAAA,cACCD,KAAME,IAEHL,EAAWU,iBAAiBL,EAAQM,sBAIxCV,EAAAC,EAAA,uBAAAC,KAAAF,EAAAG,KAAA,cACCD,KAAME,IAEDR,EAA4CQ,EAA5CR,eAAgBC,EAA4BO,EAA5BP,kBAAmBC,EAASM,EAATN,QAGzC,IAAIa,EAAmBC,IAEnB,IACIC,EAEAC,EAHAC,EAAiBH,EAEjBI,EAAW,CAAC,0BAA0B,iBAEtCC,EAAO,GAEPC,EACJ,CACI,CAACC,UAAUpB,EAAWQ,KAAKa,KAAK,kBAAkBC,eAAe,wBACjE,CAACF,UAAUpB,EAAWM,KAAKe,KAAK,OAAOC,eAAe,2BACtD,CAACF,UAAUpB,EAAWS,QAAQY,KAAK,UAAUC,eAAe,kBAXpE,IAAAC,EAasC1B,EAAesB,EAAsBH,GAArEA,EAbNO,EAaMP,iBAAkBD,EAbxBQ,EAawBR,WACpBG,EAAOA,EAAOM,OAAOT,GAErBD,EAAchB,EAAkBmB,EAAWD,GAC3CA,EAAiBS,iBAAiBX,EAAcY,KAChDR,EAAOA,EAAOM,OAAOV,EAAcI,QAEnC,IAAIS,EAAgBC,OAAOC,QAAQb,EAAiBS,kBAAkBK,OAAO,CAACC,EAAQC,KAElF,OAAOD,EAAOC,EAAK,IACrB,GACFhB,EAAiBW,gBAAgB5B,EAAM4B,EAAgB,GACvD,IAAIM,EAAWjB,EAAiBkB,qBAAqBC,KAAOnB,EAAiBW,gBAC7Eb,EAAcd,EAAWU,iBAAiBM,EAAiBoB,aAAaC,MAAOJ,EAAY,mBAC3Ff,EAAOA,EAAOM,OAAOV,EAAcI,QACnCF,EAAiBoB,aAAaC,MAAMvB,EAAcY,KAElD,IAAIY,EAAUtB,EAAiBuB,cAAcC,KAAMC,IAE/C,MAAsB,WAAfA,EAAMhC,UAKjB,OAHAO,EAAiB0B,gBAAgBJ,EAAY,EAAItB,EAAiBkB,qBAAqBQ,gBACvF1B,EAAiB2B,OAAO3B,EAAiBkB,qBAAqBQ,gBAAgB,EAEvE,CAAChB,KAAKV,EAAiBE,OAAOA","file":"js/mek_energy_pool_validator.e83f877b.js","sourcesContent":["let validators={};\r\n\r\nimport(/* webpackChunkName: \"mek_energy_pool-size-data-module\" */\r\n    \"@/data_table_modules/mek_energy_pool/mek_energy_pool-size-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.size=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_energy_pool-pool-data-module\" */\r\n    \"@/data_table_modules/mek_energy_pool/mek_energy_pool-pool-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.pool=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_energy_pool-feature-data-module\" */\r\n    \"@/data_table_modules/mek_energy_pool/mek_energy_pool-feature-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.feature=_module.cleaned_feature;\r\n});\r\n\r\nimport(/* webpackChunkName: \"mek_space-efficiency-data-module\" */\"@/data_table_modules/universal/mek_space-efficiency-data-module\")\r\n.then((_module)=>\r\n{\r\n    validators.space_efficiency=_module.validate_efficiency;\r\n});\r\n\r\nlet loopValidators, updateMultipliers, round;\r\nimport(/* webpackChunkName: \"validator_functions\" */\"./validator_functions\")\r\n.then((_module)=>\r\n{\r\n    ({loopValidators, updateMultipliers, round} = _module);\r\n});\r\n\r\nlet validateComponent=(_component)=>\r\n{\r\n    let cleanedComponent=_component;\r\n    let validatedData;\r\n    let updateList=[\"selected_portfolio_size\",\"feature_array\"];\r\n    let loopAlerts;\r\n    let alerts=[];\r\n    //loop thru independent validations\r\n    let componentsToValidate=\r\n    [\r\n        {validator:validators.pool,pkey:\"power_available\",component_prop:\"selected_energy_pool\"},\r\n        {validator:validators.size,pkey:\"size\",component_prop:\"selected_portfolio_size\"},\r\n        {validator:validators.feature,pkey:\"feature\",component_prop:'feature_array'},\r\n    ];\r\n    ({cleanedComponent, loopAlerts} = loopValidators(componentsToValidate, cleanedComponent));\r\n    alerts=alerts.concat(loopAlerts)\r\n    //update cost_multipliers for components needing update\r\n    validatedData=updateMultipliers(updateList,cleanedComponent);\r\n    cleanedComponent.cost_multipliers=validatedData.data;\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    //validate space efficiency\r\n    let cost_multiplier=Object.entries(cleanedComponent.cost_multipliers).reduce((_multi, _val)=>\r\n    {//calc new cost_multiplier\r\n        return _multi*_val[1];\r\n    },1);\r\n    cleanedComponent.cost_multiplier=round(cost_multiplier,2);\r\n    let total_cost=cleanedComponent.selected_energy_pool.cost * cleanedComponent.cost_multiplier;\r\n    validatedData=validators.space_efficiency(cleanedComponent.efficiencies.space, total_cost, \"Mek-Energy_Pool\");\r\n    alerts=alerts.concat(validatedData.alerts);\r\n    cleanedComponent.efficiencies.space=validatedData.data;\r\n    //update static values\r\n    let isFragile=cleanedComponent.feature_array.some((_feat)=>\r\n    {\r\n        return _feat.feature==\"Fragile\";\r\n    });\r\n    cleanedComponent.damage_capacity=isFragile ? 1 : cleanedComponent.selected_energy_pool.damage_capacity;\r\n    cleanedComponent.weight=cleanedComponent.selected_energy_pool.damage_capacity/2;\r\n\r\n    return {data:cleanedComponent,alerts:alerts};\r\n};\r\n\r\nexport {validateComponent};"],"sourceRoot":""}